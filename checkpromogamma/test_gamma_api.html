<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Gamma/Stripe Promo Code API</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .result { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .valid { background-color: #d4edda; border-color: #c3e6cb; }
        .invalid { background-color: #f8d7da; border-color: #f5c6cb; }
        .error { background-color: #fff3cd; border-color: #ffeaa7; }
    </style>
</head>
<body>
    <h1>Gamma/Stripe Promo Code API Tester</h1>
    <button onclick="testCodes()">Test Promo Codes</button>
    <div id="results"></div>

    <script>
        async function testCode(code) {
            const resultsDiv = document.getElementById('results');

            try {
                const response = await fetch(`https://api.stripe.com/v1/promotion_codes/${code}`, {
                    method: 'GET',
                    headers: {
                        'Authorization': 'Bearer pk_live_51MS6sAE3HBB5yrHt6gBd276SL4CGS2kGGPA4gkYgfOdKB3g9E1HMaUyoEi0Z47s0h1FVD1MuYaZ3Ay32U13xqeH400NPSkhlYc',
                        'Accept': 'application/json',
                        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) Chrome/120.0.0.0',
                        'Origin': 'https://billing.gamma.app',
                        'Referer': 'https://billing.gamma.app/c/pay/cs_live_b1rSDhKOm0RPZNr16MgX3aidRbrwjHhfaCDYWHZPTJyC6KJdRMsxwqGj0i'
                    }
                });

                let resultDiv = document.createElement('div');
                resultDiv.className = 'result';

                if (response.ok) {
                    const data = await response.json();
                    const isValid = data.id && data.active;

                    resultDiv.className += isValid ? ' valid' : ' invalid';
                    resultDiv.innerHTML = `
                        <strong>Code: ${code}</strong><br>
                        Status: ${response.status}<br>
                        Valid: ${isValid}<br>
                        Response: ${JSON.stringify(data, null, 2)}
                    `;
                } else {
                    const errorText = await response.text();
                    resultDiv.className += ' invalid';
                    resultDiv.innerHTML = `
                        <strong>Code: ${code}</strong><br>
                        Status: ${response.status}<br>
                        Error: ${errorText}
                    `;
                }

                resultsDiv.appendChild(resultDiv);

            } catch (error) {
                let resultDiv = document.createElement('div');
                resultDiv.className = 'result error';
                resultDiv.innerHTML = `
                    <strong>Code: ${code}</strong><br>
                    Error: ${error.message}
                `;
                resultsDiv.appendChild(resultDiv);
            }
        }

        async function testCodes() {
            document.getElementById('results').innerHTML = '<p>Testing...</p>';

            const codes = ['RZZKK46F', 'TEST123', 'GAMMA2025', 'SAVE20', 'DISC10'];

            for (const code of codes) {
                await testCode(code);
                // Wait 1 second between requests
                await new Promise(resolve => setTimeout(resolve, 1000));
            }

            document.getElementById('results').innerHTML += '<p><strong>Test completed!</strong></p>';
        }
    </script>
</body>
</html>





